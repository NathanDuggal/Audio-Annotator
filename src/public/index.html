<body>
    <form action="/music" method="post">
    </form>
    <input id="input" type="text" name="fname" required>
    <button onclick="post()" value="Submit">Submit</button>
    <!-- <p id="text">This is where data goes</p> -->
    <button onclick="getData()">Get Data</button>
</body>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>

        $("input").keypress(function (e) {
            if(e.which === 13 && !e.shiftKey) {
                e.preventDefault();
            
                $(this).closest("form").submit();
            }
        });

        async function post() {
            await $.post("/music", 
            {
                song: document.getElementById("input").value
            }, 
            function(data) {
                console.log(data);
            }, 
            "json").catch((error) => {
                console.error(`Could not get products: ${error}`);
            });
            //setTimeout(() => {  console.log("Waited!"); }, 100);
            console.log("here");
            //getData();
        }
    
        function getData() {
            // Fetch is a condensed get request
            fetch("/getMusic")
                .then(function(response) {
                    return response.json();
                })
                .then(function(data) {
                    console.log(data);
                });
        }
    </script>
</head>
